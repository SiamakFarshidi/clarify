{
  "query": {
    "function_score": {
      "query": {
        "bool": {
          "should": [
            {
              "match": {
                "house_hold": {
                  "query": "couple",
                  "boost": 0.2
                }
              }
            },
            {
              "distance_feature": {
                "field": "offered_since",
                "pivot": "7d",
                "origin": "now",
                "boost": 0.2
              }
            },
            {
              "distance_feature": {
                "field": "coordinate",
                "pivot": "1000m",
                "origin": [
                    3.746995,
                    51.58452
                ],
                "boost": 0.2
              }
            }
          ],
          "filter": [
            {
              "term": {
                "offer_type": "koop"
              }
            },
            {
              "range": {
                "volume_in_cubic_meters": {
                  "gte": "900"
                }
              }
            }
          ]
        }
      },
      "script_score": {
        "script": {
          "params": {
            "number_of_rooms": 4,
            "number_of_bathrooms": 2,
            "number_of_bedrooms": 3,
            "asking_price": 300000,
            "weight_number_of_rooms": 0.2,
            "weight_number_of_bathrooms": 0.1,
            "weight_number_of_bedrooms": 0.2,
            "weight_asking_price": 0.3
          },
          "inline": "_score=0;if (doc[\"number_of_rooms\"].value>= params.number_of_rooms ){_score= _score+ ( (1-params.number_of_rooms/ doc[\"number_of_rooms\"].value)* params.weight_number_of_rooms+params.weight_number_of_rooms);}else {_score= _score - ((1-doc[\"number_of_rooms\"].value/params.number_of_rooms)* params.weight_number_of_rooms);}if (  doc[\"number_of_bathrooms\"].value  >=  params.number_of_bathrooms ){_score= _score - ( ( 1- params.number_of_bathrooms/ doc[\"number_of_bathrooms\"].value ) * params.weight_number_of_bathrooms );}else{_score= _score - ( ( 1- doc[\"number_of_bathrooms\"].value/params.number_of_bathrooms ) * params.weight_number_of_bathrooms );}if ( doc[\"number_of_bedrooms\"].value >= params.number_of_bedrooms ) {_score= _score+params.weight_number_of_bedrooms+ ( (1- params.number_of_bedrooms/doc[\"number_of_bedrooms\"].value) * params.weight_number_of_bedrooms);}else{_score= _score - ( (1-doc[\"number_of_bedrooms\"].value/params.number_of_bedrooms) * params.weight_number_of_bedrooms);}if ( doc[\"asking_price\"].value <= params.asking_price ) {_score= _score+params.weight_asking_price+ ((1- doc[\"asking_price\"].value/params.asking_price)  * params.weight_asking_price);}else{_score= _score - ((1- params.asking_price/doc[\"asking_price\"].value)  * params.weight_asking_price);}if( _score <0){_score=0;}return _score;"
        }
      },
      "boost_mode": "sum",
      "max_boost": 1
    }
  },
  "size": 100,
  "from": 0,
  "sort": []
}